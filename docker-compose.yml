version: '3.9'

services:
  backend:
    build:
      context: .
      dockerfile: backend/Dockerfile
    container_name: alphaforge-backend
    ports:
      - "5000:5000"
    # Load secrets from .env (OANDA_API_KEY, GEMINI_API_KEY, etc.)
    env_file:
      - .env
    environment:
      # Default DB is SQLite in the backend folder
      - DATABASE_URL=sqlite:///./trading_signals.db
    # Bind mount backend for development (code + SQLite DB persistence)
    volumes:
      - ./backend:/app/backend
    restart: unless-stopped
